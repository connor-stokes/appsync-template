{
  "version": 4,
  "terraform_version": "1.1.7",
  "serial": 77,
  "lineage": "d4a3c03e-9f7f-9aef-aa65-fee8eaa6649f",
  "outputs": {},
  "resources": [
    {
      "mode": "managed",
      "type": "aws_appsync_api_key",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "zmpg5qjos5c5tjhd7hzxdswl4a",
            "description": "Managed by Terraform",
            "expires": "2022-05-03T00:00:00Z",
            "id": "zmpg5qjos5c5tjhd7hzxdswl4a:da2-7i7u7c5q5ndfzeawlcf7wqtc6u",
            "key": "da2-7i7u7c5q5ndfzeawlcf7wqtc6u"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_graphql_api.this"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "dynanmodb",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "zmpg5qjos5c5tjhd7hzxdswl4a",
            "arn": "arn:aws:appsync:eu-west-2:499743871687:apis/zmpg5qjos5c5tjhd7hzxdswl4a/datasources/botherdemo_dynanmodb",
            "description": "Allows access to DynamoDB table",
            "dynamodb_config": [
              {
                "region": "eu-west-2",
                "table_name": "Orders",
                "use_caller_credentials": false
              }
            ],
            "elasticsearch_config": [],
            "http_config": [],
            "id": "zmpg5qjos5c5tjhd7hzxdswl4a-botherdemo_dynanmodb",
            "lambda_config": [],
            "name": "botherdemo_dynanmodb",
            "service_role_arn": "arn:aws:iam::499743871687:role/botherdemo-appsync-iam-role",
            "type": "AMAZON_DYNAMODB"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_graphql_api.this",
            "aws_dynamodb_table.this",
            "aws_iam_role.appsync"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_datasource",
      "name": "lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "zmpg5qjos5c5tjhd7hzxdswl4a",
            "arn": "arn:aws:appsync:eu-west-2:499743871687:apis/zmpg5qjos5c5tjhd7hzxdswl4a/datasources/botherdemo_lambda",
            "description": "Allows access to lambda function",
            "dynamodb_config": [],
            "elasticsearch_config": [],
            "http_config": [],
            "id": "zmpg5qjos5c5tjhd7hzxdswl4a-botherdemo_lambda",
            "lambda_config": [
              {
                "function_arn": "arn:aws:lambda:eu-west-2:499743871687:function:botherdemo-lambda-function"
              }
            ],
            "name": "botherdemo_lambda",
            "service_role_arn": "arn:aws:iam::499743871687:role/botherdemo-appsync-iam-role",
            "type": "AWS_LAMBDA"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_graphql_api.this",
            "aws_iam_role.appsync",
            "aws_iam_role.lambda",
            "aws_lambda_function.appsync_lambda"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_graphql_api",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "additional_authentication_provider": [],
            "arn": "arn:aws:appsync:eu-west-2:499743871687:apis/zmpg5qjos5c5tjhd7hzxdswl4a",
            "authentication_type": "API_KEY",
            "id": "zmpg5qjos5c5tjhd7hzxdswl4a",
            "log_config": [],
            "name": "botherdemo-api",
            "openid_connect_config": [],
            "schema": "schema {\n    query: Query\n    mutation: Mutation\n}\n\ntype Query {\n  allOrders: [Order!]\n  getOrder(orderId: ID!): Order\n}\n\ntype Mutation {\n    addOrder(\n        emailAddress: String!\n        name: String!\n    ): Order!\n    addToShopify: ShopifyUpdate!\n}\n\ntype Order {\n    orderId: ID!\n    emailAddress: String!\n    name: String!\n}\n\ntype ShopifyUpdate {\n    customerId: ID!\n    emailAddress: String!\n    name: String!\n}",
            "tags": {},
            "uris": {
              "GRAPHQL": "https://a4onjkn2jjextnifvdoqwd7kyu.appsync-api.eu-west-2.amazonaws.com/graphql",
              "REALTIME": "wss://a4onjkn2jjextnifvdoqwd7kyu.appsync-realtime-api.eu-west-2.amazonaws.com/graphql"
            },
            "user_pool_config": [],
            "xray_enabled": false
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "add_orders",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "zmpg5qjos5c5tjhd7hzxdswl4a",
            "arn": "arn:aws:appsync:eu-west-2:499743871687:apis/zmpg5qjos5c5tjhd7hzxdswl4a/types/Mutation/resolvers/addOrder",
            "caching_config": [],
            "data_source": "botherdemo_dynanmodb",
            "field": "addOrder",
            "id": "zmpg5qjos5c5tjhd7hzxdswl4a-Mutation-addOrder",
            "kind": "UNIT",
            "pipeline_config": [],
            "request_template": "{\n    \"version\" : \"2017-02-28\",\n    \"operation\" : \"PutItem\",\n    \"key\" : {\n        \"orderId\" : $util.dynamodb.toDynamoDBJson($util.autoId())\n    },\n    \"attributeValues\" : {\n        \"emailAddress\" : $util.dynamodb.toDynamoDBJson($context.arguments.emailAddress),\n        \"name\" : $util.dynamodb.toDynamoDBJson($context.arguments.name)\n    }\n}",
            "response_template": "$utils.toJson($context.result)",
            "type": "Mutation"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.dynanmodb",
            "aws_appsync_graphql_api.this",
            "aws_dynamodb_table.this",
            "aws_iam_role.appsync"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "add_shopify_thing",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "zmpg5qjos5c5tjhd7hzxdswl4a",
            "arn": "arn:aws:appsync:eu-west-2:499743871687:apis/zmpg5qjos5c5tjhd7hzxdswl4a/types/Mutation/resolvers/addToShopify",
            "caching_config": [],
            "data_source": "botherdemo_lambda",
            "field": "addToShopify",
            "id": "zmpg5qjos5c5tjhd7hzxdswl4a-Mutation-addToShopify",
            "kind": "UNIT",
            "pipeline_config": [],
            "request_template": "{\n    \"version\": \"2018-05-29\",\n    \"operation\": \"Invoke\",\n    \"payload\": {\n        \"field\": \"addToShopify\",\n        \"arguments\": $util.toJson($context.arguments)\n    }\n}",
            "response_template": "$util.toJson($context.result)",
            "type": "Mutation"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.lambda",
            "aws_appsync_graphql_api.this",
            "aws_iam_role.appsync",
            "aws_iam_role.lambda",
            "aws_lambda_function.appsync_lambda"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "get_orders",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "zmpg5qjos5c5tjhd7hzxdswl4a",
            "arn": "arn:aws:appsync:eu-west-2:499743871687:apis/zmpg5qjos5c5tjhd7hzxdswl4a/types/Query/resolvers/getOrder",
            "caching_config": [],
            "data_source": "botherdemo_dynanmodb",
            "field": "getOrder",
            "id": "zmpg5qjos5c5tjhd7hzxdswl4a-Query-getOrder",
            "kind": "UNIT",
            "pipeline_config": [],
            "request_template": "{\n    \"version\" : \"2017-02-28\",\n    \"operation\" : \"GetItem\",\n    \"key\" : {\n        \"orderId\" : $util.dynamodb.toDynamoDBJson($ctx.args.orderId)\n    }\n}",
            "response_template": "#if($ctx.error)\n\t$util.error($ctx.error.message, $ctx.error.type)\n#end\n$util.toJson($ctx.result)",
            "type": "Query"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.dynanmodb",
            "aws_appsync_graphql_api.this"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_appsync_resolver",
      "name": "orders",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "api_id": "zmpg5qjos5c5tjhd7hzxdswl4a",
            "arn": "arn:aws:appsync:eu-west-2:499743871687:apis/zmpg5qjos5c5tjhd7hzxdswl4a/types/Query/resolvers/allOrders",
            "caching_config": [],
            "data_source": "botherdemo_dynanmodb",
            "field": "allOrders",
            "id": "zmpg5qjos5c5tjhd7hzxdswl4a-Query-allOrders",
            "kind": "UNIT",
            "pipeline_config": [],
            "request_template": "{\n    \"version\" : \"2017-02-28\",\n    \"operation\" : \"Scan\"\n}",
            "response_template": "$utils.toJson($context.result.items)",
            "type": "Query"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_appsync_datasource.dynanmodb",
            "aws_appsync_graphql_api.this",
            "aws_dynamodb_table.this",
            "aws_iam_role.appsync"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_dynamodb_table",
      "name": "this",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:dynamodb:eu-west-2:499743871687:table/Orders",
            "attribute": [
              {
                "name": "emailAddress",
                "type": "S"
              },
              {
                "name": "name",
                "type": "S"
              },
              {
                "name": "orderId",
                "type": "S"
              }
            ],
            "billing_mode": "PROVISIONED",
            "global_secondary_index": [
              {
                "hash_key": "emailAddress",
                "name": "emailAddressIndex",
                "non_key_attributes": [
                  "orderId"
                ],
                "projection_type": "INCLUDE",
                "range_key": "name",
                "read_capacity": 1,
                "write_capacity": 1
              }
            ],
            "hash_key": "orderId",
            "id": "Orders",
            "local_secondary_index": [],
            "name": "Orders",
            "point_in_time_recovery": [
              {
                "enabled": false
              }
            ],
            "range_key": "emailAddress",
            "read_capacity": 1,
            "replica": [],
            "server_side_encryption": [],
            "stream_arn": "",
            "stream_enabled": false,
            "stream_label": "",
            "stream_view_type": "",
            "tags": {
              "Environment": "Development",
              "Name": "Connor_AppSync_Demo"
            },
            "timeouts": null,
            "ttl": [
              {
                "attribute_name": "",
                "enabled": false
              }
            ],
            "write_capacity": 1
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjM2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "appsync",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::499743871687:role/botherdemo-appsync-iam-role",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"appsync.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2022-04-11T19:04:32Z",
            "description": "",
            "force_detach_policies": false,
            "id": "botherdemo-appsync-iam-role",
            "max_session_duration": 3600,
            "name": "botherdemo-appsync-iam-role",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "unique_id": "AROAXIWYOKLDWNVQYA5OU"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::499743871687:role/botherdemo-lambda-iam-role",
            "assume_role_policy": "{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}",
            "create_date": "2022-04-11T19:04:31Z",
            "description": "",
            "force_detach_policies": false,
            "id": "botherdemo-lambda-iam-role",
            "max_session_duration": 3600,
            "name": "botherdemo-lambda-iam-role",
            "name_prefix": null,
            "path": "/",
            "permissions_boundary": null,
            "tags": {},
            "unique_id": "AROAXIWYOKLDZ5XQIF75R"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_iam_role_policy",
      "name": "dynamodb",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "botherdemo-appsync-iam-role:botherdemo-dynanmodb-iam-policy",
            "name": "botherdemo-dynanmodb-iam-policy",
            "name_prefix": null,
            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": [\n        \"dynamodb:*\"\n      ],\n      \"Effect\": \"Allow\",\n      \"Resource\": [\n        \"arn:aws:dynamodb:eu-west-2:499743871687:table/Orders\"\n      ]\n    }\n  ]\n}\n",
            "role": "botherdemo-appsync-iam-role"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "aws_dynamodb_table.this",
            "aws_iam_role.appsync"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_lambda_function",
      "name": "appsync_lambda",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:lambda:eu-west-2:499743871687:function:botherdemo-lambda-function",
            "dead_letter_config": [],
            "description": "",
            "environment": [],
            "file_system_config": [],
            "filename": "../build/payload.zip",
            "function_name": "botherdemo-lambda-function",
            "handler": "shopify-update.handler",
            "id": "botherdemo-lambda-function",
            "invoke_arn": "arn:aws:apigateway:eu-west-2:lambda:path/2015-03-31/functions/arn:aws:lambda:eu-west-2:499743871687:function:botherdemo-lambda-function/invocations",
            "kms_key_arn": "",
            "last_modified": "2022-04-11T19:07:14.782+0000",
            "layers": [],
            "memory_size": 128,
            "publish": false,
            "qualified_arn": "arn:aws:lambda:eu-west-2:499743871687:function:botherdemo-lambda-function:$LATEST",
            "reserved_concurrent_executions": -1,
            "role": "arn:aws:iam::499743871687:role/botherdemo-lambda-iam-role",
            "runtime": "nodejs12.x",
            "s3_bucket": null,
            "s3_key": null,
            "s3_object_version": null,
            "source_code_hash": "SC09hVAsfT3R62xy16lqdAk+7mCJfbdqVpR+z4jqU0M=",
            "source_code_size": 701,
            "tags": {},
            "timeout": 3,
            "timeouts": null,
            "tracing_config": [
              {
                "mode": "PassThrough"
              }
            ],
            "version": "$LATEST",
            "vpc_config": []
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "aws_iam_role.lambda"
          ]
        }
      ]
    }
  ]
}
